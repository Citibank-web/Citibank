<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Citibank Login</title>

<style>
  body { font-family: Arial; background:#f2f2f2; display:flex; justify-content:center; align-items:center; height:100vh; }
  .login-box { background:#fff; padding:40px; border-radius:10px; box-shadow:0 5px 20px rgba(0,0,0,0.1); width:320px; }
  .login-box h2 { text-align:center; margin-bottom:20px; color:#003366; }
  input, button { width:100%; padding:12px; margin:10px 0; border-radius:5px; border:1px solid #ccc; font-size:16px; }
  button { background:#003366; color:#fff; border:none; cursor:pointer; }
  button:hover { background:#0055a5; }
  #status { color:red; font-size:14px; text-align:center; }
</style>
</head>

<body>

<div class="login-box">
  <h2>Citibank Login</h2>
  <input type="text" id="username" placeholder="Username">
  <input type="password" id="password" placeholder="Password">
  <button id="btnLogin">Login</button>
  <p id="status"></p>
</div>

<!-- SUPABASE LOGIN LOGIC -->
<script type="module">
import { createClient } from "https://esm.sh/@supabase/supabase-js@2";

const supabase = createClient(
  "https://aaljhxyrqnewvhejtoik.supabase.co",
  "sb_publishable_52hZQtxrDZB4k_fLi8S0GQ_j5wma9lz"
);

const btnLogin = document.getElementById("btnLogin");
const status = document.getElementById("status");

btnLogin.addEventListener("click", async () => {
  const username = document.getElementById("username").value.trim();
  const password = document.getElementById("password").value.trim();

  if (!username || !password) {
    status.textContent = "Please fill all fields!";
    return;
  }

  status.textContent = "Logging in...";

  // Convert username → email (your design choice)
  const email = `${username}@citibank.local`;

  const { error } = await supabase.auth.signInWithPassword({
    email,
    password
  });

  if (error) {
    status.textContent = "Login failed ❌ Check username or password";
    return;
  }

  // Successful login
  window.location.href = "Dashboard.html";
});
</script>

</body>
</html>
